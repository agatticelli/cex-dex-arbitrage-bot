# CEX-DEX Arbitrage Bot Configuration
# Copy this file to config.yaml and update with your settings

# Ethereum blockchain configuration
ethereum:
  # WebSocket URLs for real-time block subscription (required)
  # Get your API keys from https://infura.io or https://alchemy.com
  websocket_urls:
    - "wss://mainnet.infura.io/ws/v3/YOUR_INFURA_KEY"
    - "wss://eth-mainnet.g.alchemy.com/v2/YOUR_ALCHEMY_KEY"

  # RPC endpoints for contract calls and failover (required)
  rpc_endpoints:
    - url: "https://mainnet.infura.io/v3/YOUR_INFURA_KEY"
      weight: 1
    - url: "https://eth-mainnet.g.alchemy.com/v2/YOUR_ALCHEMY_KEY"
      weight: 1

  # Reconnection settings for WebSocket
  reconnect:
    max_backoff: 30s
    base_delay: 1s
    max_delay: 30s
    jitter: 0.2

# Exchange configuration
exchanges:
  binance:
    base_url: "https://api.binance.com"
    rate_limit:
      requests_per_minute: 1200  # Binance API limit
      burst: 50
    trading_fee: 0.001  # 0.1% fee

# Uniswap V3 configuration
uniswap:
  # ETH-USDC pool address on Ethereum mainnet (still used for cache key)
  pool_address: "0x88e6A0c2dDD26FEEb64F039a2c41296FcB3f5640"
  # QuoterV2 contract address (for accurate price quotes)
  quoter_address: "0x61fFE014bA17989E743c5F6cB21bF9697530B21e"
  # Token addresses
  usdc_address: "0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"
  weth_address: "0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2"

  # Fee tiers to try: [100=0.01%, 500=0.05%, 3000=0.3%, 10000=1%]
  # For Infura free tier (100k req/day), use only [500, 3000] to stay under rate limits
  # For paid RPC providers (Alchemy, Infura paid), use all 4: [100, 500, 3000, 10000]
  fee_tiers: [500, 3000]

  # Rate limiting for QuoterV2 calls (to avoid hitting RPC provider limits)
  rate_limit:
    requests_per_minute: 60  # Conservative limit for Infura free tier (~69 RPM sustained)
    burst: 12                # Allow bursts up to 12 (2 fee tiers × 2 directions × 3 trade sizes)

# Arbitrage detection settings
arbitrage:
  # Trade sizes to test (in wei)
  # 1 ETH = 1000000000000000000 wei
  # 10 ETH = 10000000000000000000 wei
  # 100 ETH = 100000000000000000000 wei
  trade_sizes:
    - "1000000000000000000"    # 1 ETH
    - "10000000000000000000"   # 10 ETH
    - "100000000000000000000"  # 100 ETH

  # Minimum profit threshold (percentage)
  # Only opportunities above this threshold will be published
  min_profit_threshold: 0.5  # 0.5%

# Redis configuration (for caching)
redis:
  address: "localhost:6379"
  password: ""
  db: 0

# AWS services configuration
aws:
  # LocalStack endpoint for local development
  # For production, remove this line to use real AWS
  endpoint: "http://localhost:4566"
  region: "us-east-1"

  # SNS topic ARN for publishing opportunities
  # LocalStack format: arn:aws:sns:us-east-1:000000000000:arbitrage-opportunities
  # Production format: arn:aws:sns:us-east-1:YOUR_ACCOUNT_ID:arbitrage-opportunities
  sns_topic_arn: "arn:aws:sns:us-east-1:000000000000:arbitrage-opportunities"

# Cache configuration
cache:
  l1_max_size: 1000  # In-memory cache max entries
  l2_ttl: 60s        # Redis cache TTL

# Observability configuration
observability:
  # Logging settings
  logging:
    level: "info"  # debug, info, warn, error
    format: "json"  # json or text

  # Metrics settings
  metrics:
    enabled: true
    port: 9090  # Prometheus metrics endpoint

  # Distributed tracing settings
  tracing:
    enabled: true
    endpoint: "localhost:4317"  # OTLP gRPC endpoint (Jaeger)

# HTTP server configuration
http:
  port: 8080  # Health checks and metrics endpoint
